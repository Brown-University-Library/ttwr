{% extends "rome_templates/base.html" %}
{% load url from future %}
{% load static from staticfiles %}

{% block title %}The Theater that was Rome - Books{% endblock %}
{% block page_title %}The Theater that was Rome - Books{% endblock %}

{% block extra_head %}
<style type="text/css">
    #cookietrail {
        display: none;
    }
</style>
{% endblock %}

{% block javascript %}
<script type="text/javascript" src="{% static 'rome/js/list.js'%}"></script>
<script type="text/javascript">
window.onload=load;
var curr_page;
var max_num;
var prints_per_page;

function load()
{
    max_num={{num_books}};
    prints_per_page={{ books_per_page }};
    
    curr_page={{ curr_page }};
    show_page(curr_page);
    show_sorting('{{ sorting }}');
    show_collection('{{ collection }}');

    expand_buttons()
}
</script>
{% endblock %}

{% block intro %}
  Click on "View" to see thumbnails of all the pages of a book. Click "BDR
  View" to see the default repository entry for a book.
{% endblock %}

{% block pagination %}
            {% for i in books.paginator.page_range %}
                <button id="page_button_{{i}}" class="page_button" onclick="show_page({{i}})">{{i}}</button>
            {% endfor %}
            &nbsp showing <span id="prints_shown"></span> of {{books.paginator.count}} books; on page <span id="curr_page_span">{{books.number}}</span>
            &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
            Sort by:&nbsp
            {% for opt in sort_options.keys %}
              <a id="sort_{{opt}}" 
                class="sort_link{% if opt == sorting %} sort_active{% endif %}"
                href="{% url 'books' %}?sort_by={{opt}}">{{opt|title}}
              </a>{% if not forloop.last %} | {% endif %}
            {% endfor %}
{% endblock %}

{% block content %}
{% for page in page_list %}
<div id="page_{{forloop.counter}}" num="{{forloop.counter}}" style="display:none;">
  <ul class="results">
    {% for book in page %}
      <li {% if forloop.first %}value="{{books.start_index}}"{% endif %}>
        <span id="{{books.number}}_{{forloop.counter}}">
          Book {{ book.id }}
          <a href="{{ book.thumbnail_url }}?book_list_page={{books.number}}">
            [View]&nbsp
          </a> 
          <br />
          Author(s): <span class="dark">{{ book.authors }}</span><br />
          Title: <span class="dark">{{ book.title }}</span><br />
          {% for atitle  in book.alt_titles %}
            {% if forloop.first %}
            Alternative Title(s):<br />
            {% endif %}
            &nbsp;&nbsp;&nbsp;&nbsp;<span class="dark">{{atitle}}</span><br />
          {% endfor %}
          Date: <span class="dark">{{ book.date }}</span><br />
          <div class="collection_data">
            ID: {{ book.id }}
          </div>
          <a href={{ book.studio_uri }} target="_blank">[BDR View]</a><br />
        </span>
        <br />
        <br />
      </li>
    {% endfor %}
  </ul>
</div>
{% endfor %}
{% endblock %}
